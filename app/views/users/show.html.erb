<%= render "shared/header" %>
<div class ="mypage-top">
  <div class = "mypage">
  <%= form_with(model: @user, id: 'user_new', local: true) do |form| %>
    <div class ="mypage-main-top">
      <div class = "mypage-image-left">選択してください
      </div>
      <div class ="mypage-main">
        <div class="mypage-main-contents">
          <h2 class="mypage-title">
            <%= current_user.nickname %>のマイページ
          </h2>
        </div>

        <div class ="mypage-contents">
          <div class="form-group">
            <div class='form-text-wrap'>
              <h3 class="mypage-name">NAME</h3>
              <div class= "mypage-content"><%= current_user.name %></div>
            </div>
          </div>
        </div>

        <div class ="mypage-contents">
          <div class="form-group">
            <div class='form-text-wrap'>
              <h3 class="mypage-name">parent</h3>
              <div class= "mypage-content"><%= current_user.gender.name%></div>
            </div>
          </div>
        </div>

        <div class ="btn-list">
          <%= link_to "編集", edit_user_path, method: :get, class: "mypage-edit-btn" %>
        </div>
      </div>
      <div class = "mypage-image-right">選択してください
      </div>
    <% end %>
    </div>

    <div class="mypage-sub-left">
      <h2 class="calendar-show-top">予定</h2>
      <table class= "mypage-table">
          <thead>
            <tr class = "mypage-show-titles" >
              <th class="mypage-show-title">時間</th>
              <th class="mypage-show-title">予定</th>
              <th class="mypage-show-title">内容</th>
            </tr>
          </thead>

          <tbody>
            <% @calendars.each do |calendar| %>
              <tr>
                <td class="mypage-show-content">
                  <%= calendar.start_time.strftime("%H:%M") %>~<%= calendar.end_time.strftime("%H:%M") %>
                    <div class="mypage-show-btns">
                      <%= link_to "(変更する)", edit_calendar_path(calendar), method: :get, class: "calendar-show-btn" %>
                      <%= link_to "(削除する)", calendar_path(calendar), method: :delete, class: "calendar-show-btn" %>
                    </div>
                </td>
                <td class="mypage-show-content"><%= calendar.schedule %></td>
                <td class="mypage-show-content"><%= calendar.content %></td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>

    <div class="mypage-sub-right">
      <h2 class="calendar-show-top">日記</h2>
      <table class= "mypage-table-right">
          <thead>
            <tr class = "mypage-show-titles" >
              <th class="mypage-show-title">DAY</th>
              <th class="mypage-show-title">HAPPY</th>
              <th class="mypage-show-title">DIARY</th>
            </tr>
          </thead>

          <tbody>
            <% @diaries.each do |diary| %>
              <tr>
                <td class="mypage-show-content">
                  <%= diary.start_time.strftime("%Y年%m月%d日")%>
                    <div class="mypage-show-btns">
                      <%= link_to "(変更する)", edit_diary_path(diary), method: :get, class: "calendar-show-btn" %>
                      <%= link_to "(削除する)", diary_path(diary), method: :delete, class: "calendar-show-btn" %>
                    </div>
                </td>
                <td class="mypage-show-content"><%= diary.happy %></td>
                <td class="mypage-show-content"><%= diary.diary %></td>
              </tr>
            <% end %>
          </tbody>
      </table>
    </div>
  </div>
</div>
<%= render "shared/fotter" %>